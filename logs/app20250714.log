2025-07-14 09:12:49.241 +10:00 [INF] Google OAuth configuration - ClientId: true, ClientSecret: true, Environment: Development
2025-07-14 09:12:49.851 +10:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-07-14 09:12:49.943 +10:00 [INF] User profile is available. Using 'C:\Users\weiwa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-14 09:12:50.012 +10:00 [INF] Now listening on: http://localhost:55556
2025-07-14 09:12:50.013 +10:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-14 09:12:50.013 +10:00 [INF] Hosting environment: Development
2025-07-14 09:12:50.013 +10:00 [INF] Content root path: D:\workspace\medicaltracker\medical-tracker-backend
2025-07-14 09:12:56.407 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJg9gcNBJL5R2eY3_p8E7n4xRPda2NqhwQUH-Qv5tquitfCMejSThThuczsZw-MkZQ&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email&authuser=1&prompt=none - null null
2025-07-14 09:12:56.479 +10:00 [INF] OAuth request: /api/auth/callback, Method: GET, HasSession: true, QueryString: ?code=4%2F0AVMBsJg9gcNBJL5R2eY3_p8E7n4xRPda2NqhwQUH-Qv5tquitfCMejSThThuczsZw-MkZQ&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email&authuser=1&prompt=none
2025-07-14 09:12:56.499 +10:00 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2025-07-14 09:12:56.500 +10:00 [ERR] OAuth remote failure: The oauth state was missing or invalid.
2025-07-14 09:12:56.505 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJg9gcNBJL5R2eY3_p8E7n4xRPda2NqhwQUH-Qv5tquitfCMejSThThuczsZw-MkZQ&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email&authuser=1&prompt=none - 302 0 null 98.5507ms
2025-07-14 09:12:56.511 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:55556/login?error=oauth_failed - null null
2025-07-14 09:12:56.516 +10:00 [DBG] AuthenticationScheme: Cookies was not authenticated.
2025-07-14 09:12:56.518 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:55556/login?error=oauth_failed - 404 0 null 7.0993ms
2025-07-14 09:12:56.518 +10:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:55556/login, Response status code: 404
2025-07-14 09:13:37.980 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJg0NAzJnmMDyRTF0e-pe6QinH3qwP8y9-JrzrPS0JlnMHczwCVqpi5kZROFQiuRfA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=none - null null
2025-07-14 09:13:37.984 +10:00 [INF] OAuth request: /api/auth/callback, Method: GET, HasSession: true, QueryString: ?code=4%2F0AVMBsJg0NAzJnmMDyRTF0e-pe6QinH3qwP8y9-JrzrPS0JlnMHczwCVqpi5kZROFQiuRfA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=none
2025-07-14 09:13:37.985 +10:00 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2025-07-14 09:13:37.986 +10:00 [ERR] OAuth remote failure: The oauth state was missing or invalid.
2025-07-14 09:13:37.986 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJg0NAzJnmMDyRTF0e-pe6QinH3qwP8y9-JrzrPS0JlnMHczwCVqpi5kZROFQiuRfA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=none - 302 0 null 6.6689ms
2025-07-14 09:13:37.991 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:55556/login?error=oauth_failed - null null
2025-07-14 09:13:37.993 +10:00 [DBG] AuthenticationScheme: Cookies was not authenticated.
2025-07-14 09:13:37.996 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:55556/login?error=oauth_failed - 404 0 null 4.6115ms
2025-07-14 09:13:37.996 +10:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:55556/login, Response status code: 404
2025-07-14 09:13:50.574 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJgz04BWGRaH96w1IhyTSwTV9U3L2tR3Gn2uVTp76HUZ4mXi2W-_3HjFmWTDNBa9LA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=none - null null
2025-07-14 09:13:50.577 +10:00 [INF] OAuth request: /api/auth/callback, Method: GET, HasSession: true, QueryString: ?code=4%2F0AVMBsJgz04BWGRaH96w1IhyTSwTV9U3L2tR3Gn2uVTp76HUZ4mXi2W-_3HjFmWTDNBa9LA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=none
2025-07-14 09:13:50.578 +10:00 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2025-07-14 09:13:50.578 +10:00 [ERR] OAuth remote failure: The oauth state was missing or invalid.
2025-07-14 09:13:50.579 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJgz04BWGRaH96w1IhyTSwTV9U3L2tR3Gn2uVTp76HUZ4mXi2W-_3HjFmWTDNBa9LA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=none - 302 0 null 5.0429ms
2025-07-14 09:13:50.586 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:55556/login?error=oauth_failed - null null
2025-07-14 09:13:50.588 +10:00 [DBG] AuthenticationScheme: Cookies was not authenticated.
2025-07-14 09:13:50.588 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:55556/login?error=oauth_failed - 404 0 null 2.7369ms
2025-07-14 09:13:50.589 +10:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:55556/login, Response status code: 404
2025-07-14 09:21:36.099 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJhXzkZ9lLpIPWojZrwe3IjCQeInbMBZyNjoIDYzutUZUQSWCi-sWLR2O28Bo9iKEw&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - null null
2025-07-14 09:21:36.100 +10:00 [INF] OAuth request: /api/auth/callback, Method: GET, HasSession: true, QueryString: ?code=4%2F0AVMBsJhXzkZ9lLpIPWojZrwe3IjCQeInbMBZyNjoIDYzutUZUQSWCi-sWLR2O28Bo9iKEw&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none
2025-07-14 09:21:36.101 +10:00 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2025-07-14 09:21:36.102 +10:00 [ERR] OAuth remote failure: The oauth state was missing or invalid.
2025-07-14 09:21:36.104 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJhXzkZ9lLpIPWojZrwe3IjCQeInbMBZyNjoIDYzutUZUQSWCi-sWLR2O28Bo9iKEw&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - 302 0 null 5.2568ms
2025-07-14 09:21:36.109 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:55556/login?error=oauth_failed - null null
2025-07-14 09:21:36.110 +10:00 [DBG] AuthenticationScheme: Cookies was not authenticated.
2025-07-14 09:21:36.111 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:55556/login?error=oauth_failed - 404 0 null 1.5229ms
2025-07-14 09:21:36.111 +10:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:55556/login, Response status code: 404
2025-07-14 09:21:54.103 +10:00 [INF] Google OAuth configuration - ClientId: true, ClientSecret: true, Environment: Development
2025-07-14 09:21:54.703 +10:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-07-14 09:21:54.790 +10:00 [INF] User profile is available. Using 'C:\Users\weiwa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-14 09:21:54.855 +10:00 [INF] Now listening on: http://localhost:55556
2025-07-14 09:21:54.856 +10:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-14 09:21:54.856 +10:00 [INF] Hosting environment: Development
2025-07-14 09:21:54.856 +10:00 [INF] Content root path: D:\workspace\medicaltracker\medical-tracker-backend
2025-07-14 09:22:04.591 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJisqqmjsNqByEB1_O8BuE-usaKaR5uBkZW-RCVD0KE4dOWJwAVjBWsEIGfyHSAljA&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=none - null null
2025-07-14 09:22:04.688 +10:00 [INF] OAuth request: /api/auth/callback, Method: GET, HasSession: true, QueryString: ?code=4%2F0AVMBsJisqqmjsNqByEB1_O8BuE-usaKaR5uBkZW-RCVD0KE4dOWJwAVjBWsEIGfyHSAljA&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=none
2025-07-14 09:22:04.706 +10:00 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2025-07-14 09:22:04.707 +10:00 [ERR] OAuth remote failure: The oauth state was missing or invalid.
2025-07-14 09:22:04.711 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJisqqmjsNqByEB1_O8BuE-usaKaR5uBkZW-RCVD0KE4dOWJwAVjBWsEIGfyHSAljA&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=none - 302 0 null 122.3354ms
2025-07-14 09:22:04.715 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:55556/login?error=oauth_failed - null null
2025-07-14 09:22:04.720 +10:00 [DBG] AuthenticationScheme: Cookies was not authenticated.
2025-07-14 09:22:04.721 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:55556/login?error=oauth_failed - 404 0 null 6.7175ms
2025-07-14 09:22:04.722 +10:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:55556/login, Response status code: 404
2025-07-14 09:25:47.529 +10:00 [INF] Google OAuth configuration - ClientId: true, ClientSecret: true, Environment: Development
2025-07-14 09:25:48.151 +10:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-07-14 09:25:48.241 +10:00 [INF] User profile is available. Using 'C:\Users\weiwa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-14 09:25:48.305 +10:00 [INF] Now listening on: http://localhost:55556
2025-07-14 09:25:48.305 +10:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-14 09:25:48.306 +10:00 [INF] Hosting environment: Development
2025-07-14 09:25:48.306 +10:00 [INF] Content root path: D:\workspace\medicaltracker\medical-tracker-backend
2025-07-14 09:26:10.794 +10:00 [INF] Google OAuth configuration - ClientId: true, ClientSecret: true, Environment: Development
2025-07-14 09:26:11.393 +10:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-07-14 09:26:11.482 +10:00 [INF] User profile is available. Using 'C:\Users\weiwa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-14 09:26:11.551 +10:00 [INF] Now listening on: http://localhost:55556
2025-07-14 09:26:11.551 +10:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-14 09:26:11.551 +10:00 [INF] Hosting environment: Development
2025-07-14 09:26:11.552 +10:00 [INF] Content root path: D:\workspace\medicaltracker\medical-tracker-backend
2025-07-14 09:26:21.811 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJiP4gPqXq7hdUaukZqxKS4XTWrNPDZsgkhzC_7Lb12DuD5LP53OzMMCjkwOkF7Ttw&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - null null
2025-07-14 09:26:21.901 +10:00 [INF] OAuth request: /api/auth/callback, Method: GET, HasSession: true, QueryString: ?code=4%2F0AVMBsJiP4gPqXq7hdUaukZqxKS4XTWrNPDZsgkhzC_7Lb12DuD5LP53OzMMCjkwOkF7Ttw&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none
2025-07-14 09:26:21.926 +10:00 [DBG] AuthenticationScheme: Cookies was not authenticated.
2025-07-14 09:26:21.928 +10:00 [INF] Executing endpoint 'Backend.AuthController.Callback (backend)'
2025-07-14 09:26:21.940 +10:00 [INF] Route matched with {action = "Callback", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Callback() on controller Backend.AuthController (backend).
2025-07-14 09:26:45.782 +10:00 [INF] OAuth callback received with query parameters: ?code=4%2F0AVMBsJiP4gPqXq7hdUaukZqxKS4XTWrNPDZsgkhzC_7Lb12DuD5LP53OzMMCjkwOkF7Ttw&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none
2025-07-14 09:26:48.994 +10:00 [INF] OAuth callback parameters - code: present, error: 
2025-07-14 09:26:52.793 +10:00 [WRN] User is not authenticated in callback
2025-07-14 09:26:53.804 +10:00 [INF] Executing RedirectResult, redirecting to http://localhost:3000/login?error=not_authenticated.
2025-07-14 09:26:53.809 +10:00 [INF] Executed action Backend.AuthController.Callback (backend) in 31864.8675ms
2025-07-14 09:26:53.812 +10:00 [INF] Executed endpoint 'Backend.AuthController.Callback (backend)'
2025-07-14 09:26:59.302 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJiP4gPqXq7hdUaukZqxKS4XTWrNPDZsgkhzC_7Lb12DuD5LP53OzMMCjkwOkF7Ttw&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - 302 0 null 37492.6126ms
2025-07-14 09:27:18.411 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJj4fmFo0qLnwmCdqiKfvzruNj-vT6-y8esVoS626uJO_6azsVA7iitEXIy9iRJdQA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - null null
2025-07-14 09:27:18.425 +10:00 [INF] OAuth request: /api/auth/callback, Method: GET, HasSession: true, QueryString: ?code=4%2F0AVMBsJj4fmFo0qLnwmCdqiKfvzruNj-vT6-y8esVoS626uJO_6azsVA7iitEXIy9iRJdQA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none
2025-07-14 09:27:18.427 +10:00 [DBG] AuthenticationScheme: Cookies was not authenticated.
2025-07-14 09:27:18.428 +10:00 [INF] Executing endpoint 'Backend.AuthController.Callback (backend)'
2025-07-14 09:27:18.429 +10:00 [INF] Route matched with {action = "Callback", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Callback() on controller Backend.AuthController (backend).
2025-07-14 09:27:24.866 +10:00 [INF] OAuth callback received with query parameters: ?code=4%2F0AVMBsJj4fmFo0qLnwmCdqiKfvzruNj-vT6-y8esVoS626uJO_6azsVA7iitEXIy9iRJdQA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none
2025-07-14 09:27:33.005 +10:00 [INF] OAuth callback parameters - code: present, error: 
2025-07-14 09:31:31.087 +10:00 [INF] Google OAuth configuration - ClientId: true, ClientSecret: true, Environment: Development
2025-07-14 09:31:31.770 +10:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-07-14 09:31:31.867 +10:00 [INF] User profile is available. Using 'C:\Users\weiwa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-14 09:31:31.938 +10:00 [INF] Now listening on: http://localhost:55556
2025-07-14 09:31:31.939 +10:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-14 09:31:31.939 +10:00 [INF] Hosting environment: Development
2025-07-14 09:31:31.939 +10:00 [INF] Content root path: D:\workspace\medicaltracker\medical-tracker-backend
2025-07-14 09:34:37.627 +10:00 [INF] Google OAuth configuration - ClientId: true, ClientSecret: true, Environment: Development
2025-07-14 09:34:38.249 +10:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-07-14 09:34:38.337 +10:00 [INF] User profile is available. Using 'C:\Users\weiwa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-14 09:34:38.403 +10:00 [INF] Now listening on: http://localhost:55556
2025-07-14 09:34:38.403 +10:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-14 09:34:38.403 +10:00 [INF] Hosting environment: Development
2025-07-14 09:34:38.403 +10:00 [INF] Content root path: D:\workspace\medicaltracker\medical-tracker-backend
2025-07-14 09:34:46.567 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJg4dA5VPkbTGyLgHiQlQx7imowc-j79Lo2UOP3IgYn8ZHJpk_G5FJ4eTakncEYxzQ&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - null null
2025-07-14 09:34:46.607 +10:00 [INF] OAuth request: /api/auth/callback, Method: GET, HasSession: true, QueryString: ?code=4%2F0AVMBsJg4dA5VPkbTGyLgHiQlQx7imowc-j79Lo2UOP3IgYn8ZHJpk_G5FJ4eTakncEYxzQ&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none
2025-07-14 09:34:46.629 +10:00 [DBG] AuthenticationScheme: Cookies was not authenticated.
2025-07-14 09:34:46.633 +10:00 [INF] Executing endpoint 'Backend.AuthController.Callback (backend)'
2025-07-14 09:34:46.652 +10:00 [INF] Route matched with {action = "Callback", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Callback() on controller Backend.AuthController (backend).
2025-07-14 09:34:46.668 +10:00 [INF] OAuth callback received with query parameters: ?code=4%2F0AVMBsJg4dA5VPkbTGyLgHiQlQx7imowc-j79Lo2UOP3IgYn8ZHJpk_G5FJ4eTakncEYxzQ&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none
2025-07-14 09:34:46.668 +10:00 [INF] OAuth callback parameters - code: present, error: 
2025-07-14 09:34:46.668 +10:00 [INF] Handling OAuth callback manually with authorization code
2025-07-14 09:34:47.264 +10:00 [ERR] Failed to exchange authorization code for token: {
  "error": "invalid_request",
  "error_description": "\nYou can\u0026#39;t sign in to this app because it doesn\u0026#39;t comply with Google\u0026#39;s OAuth 2.0 policy for keeping apps secure.\n\nYou can let the app developer know that this app doesn\u0026#39;t comply with one or more Google validation rules.\n  "
}
2025-07-14 09:34:47.268 +10:00 [ERR] Failed to get user info from Google
2025-07-14 09:34:47.279 +10:00 [INF] Executing RedirectResult, redirecting to http://localhost:3000/login?error=token_exchange_failed.
2025-07-14 09:34:47.290 +10:00 [INF] Executed action Backend.AuthController.Callback (backend) in 630.2498ms
2025-07-14 09:34:47.300 +10:00 [INF] Executed endpoint 'Backend.AuthController.Callback (backend)'
2025-07-14 09:34:47.317 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJg4dA5VPkbTGyLgHiQlQx7imowc-j79Lo2UOP3IgYn8ZHJpk_G5FJ4eTakncEYxzQ&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - 302 0 null 750.864ms
2025-07-14 09:39:47.970 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJjPXbFmo1kpR6Q15OkDw78RMgcc20JGxEPEzJ50K23e145VIZINWRAP65RiXlmGjA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - null null
2025-07-14 09:39:47.977 +10:00 [INF] OAuth request: /api/auth/callback, Method: GET, HasSession: true, QueryString: ?code=4%2F0AVMBsJjPXbFmo1kpR6Q15OkDw78RMgcc20JGxEPEzJ50K23e145VIZINWRAP65RiXlmGjA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none
2025-07-14 09:39:47.978 +10:00 [DBG] AuthenticationScheme: Cookies was not authenticated.
2025-07-14 09:39:47.979 +10:00 [INF] Executing endpoint 'Backend.AuthController.Callback (backend)'
2025-07-14 09:39:47.979 +10:00 [INF] Route matched with {action = "Callback", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Callback() on controller Backend.AuthController (backend).
2025-07-14 09:39:47.982 +10:00 [INF] OAuth callback received with query parameters: ?code=4%2F0AVMBsJjPXbFmo1kpR6Q15OkDw78RMgcc20JGxEPEzJ50K23e145VIZINWRAP65RiXlmGjA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none
2025-07-14 09:39:47.983 +10:00 [INF] OAuth callback parameters - code: present, error: 
2025-07-14 09:39:47.983 +10:00 [INF] Handling OAuth callback manually with authorization code
2025-07-14 09:39:48.348 +10:00 [ERR] Failed to exchange authorization code for token: {
  "error": "invalid_request",
  "error_description": "\nYou can\u0026#39;t sign in to this app because it doesn\u0026#39;t comply with Google\u0026#39;s OAuth 2.0 policy for keeping apps secure.\n\nYou can let the app developer know that this app doesn\u0026#39;t comply with one or more Google validation rules.\n  "
}
2025-07-14 09:39:48.348 +10:00 [ERR] Failed to get user info from Google
2025-07-14 09:39:48.349 +10:00 [INF] Executing RedirectResult, redirecting to http://localhost:3000/login?error=token_exchange_failed.
2025-07-14 09:39:48.350 +10:00 [INF] Executed action Backend.AuthController.Callback (backend) in 370.1774ms
2025-07-14 09:39:48.350 +10:00 [INF] Executed endpoint 'Backend.AuthController.Callback (backend)'
2025-07-14 09:39:48.352 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:55556/api/auth/callback?code=4%2F0AVMBsJjPXbFmo1kpR6Q15OkDw78RMgcc20JGxEPEzJ50K23e145VIZINWRAP65RiXlmGjA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - 302 0 null 381.4143ms
